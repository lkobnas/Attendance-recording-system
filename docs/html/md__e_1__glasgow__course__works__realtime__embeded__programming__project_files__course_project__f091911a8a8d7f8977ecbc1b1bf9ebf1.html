<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Punchin_Attendcance_System: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Punchin_Attendcance_System
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>在树莓派上使用AS608模块，本项目实现了所有官方用户开发手册中列出的功能，函数声明在 <code><a class="el" href="as608_8h.html">as608.h</a></code>中。用户可直接调用相应的函数与AS608模块进行通信。</p>
<p>另外，项目中有一个命令行程序，可以在终端下通过命令与模块进行交互。</p>
<h2>一、AS608</h2>
<h3>1. 简介</h3>
<p>数据均存储在模块内，指纹容量300枚(0-299)。</p>
<p>芯片内设有一个 72K 字节的图像缓冲区与二个 512 bytes(256 字)大小的特征文件 缓冲区，名字分别称为：<code>ImageBuffer</code>，<code>CharBuffer1</code>，<code>CharBuffer2</code>。用户可以通过指 令读写任意一个缓冲区。<code>CharBuffer1</code> 或 <code>CharBuffer2</code> 既可以用于存放普通特征文件也 可以用于存放模板特征文件。</p>
<h3>2. 工作流程</h3>
<p>录入指纹流程：</p>
<div class="image">
<img src="img/record.png"  alt="record"/>
</div>
<p>搜索指纹流程：</p>
<div class="image">
<img src="img/search.png"  alt="search"/>
</div>
<p>AS608模块内部内置了手指探测电路，用户可读取状态引脚(WAK)判断有无手指按下。在本项目组，<code><a class="el" href="as608_8h.html">as608.h</a></code>中的全局变量<code>g_detect_pin</code>就是指该引脚与树莓派的哪个GPIO端口相连的。(&lt;font color="red"&gt;注意：引脚编码方式是<code>wiringPi</code>编码&lt;/font&gt;)。读取该引脚的输入信号，高电平意味着模块上有手指存在，否则不存在，等待几秒后，如果一直检测不到手指，就报错。</p>
<h3>3. 芯片地址和密码</h3>
<p>默认地址是<code>0xffffffff</code>，默认密码是<code>0x00000000</code>，如果不自己设置其他密码，就不需要向模块验证密码，否则，与模块通信的第一条指令必须是验证密码<code><a class="el" href="as608_8c.html#a45a9810f3281670bff70b96a150f5c09">PS_VfyPwd()</a></code>。</p>
<h2>二、项目-函数库</h2>
<p>把本项目根目录下的<code><a class="el" href="as608_8h.html">as608.h</a></code>和<code><a class="el" href="as608_8c.html">as608.c</a></code>拷贝到你的程序目录下即可。</p>
<h3>1. 模块参数变量</h3>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{C++}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;// typedef unsigned int uint;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;typedef struct AS608_Module_Info {</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  uint status;      // 状态寄存器 0</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  uint model;       // 传感器类型 0-15</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  uint capacity;    // 指纹容量，300</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  uint secure_level;    // 安全等级 1/2/3/4/5，默认为3</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  uint packet_size;     // 数据包大小 32/64/128/256 bytes，默认为128</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  uint baud_rate;       // 波特率系数 </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  uint chip_addr;       // 设备(芯片)地址                  </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  uint password;        // 通信密码</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  char product_sn[12];        // 产品型号</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  char software_version[12];  // 软件版本号</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  char manufacture[12];       // 厂家名称</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  char sensor_name[12];       // 传感器名称</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  uint detect_pin;      // AS608的WAK引脚连接的树莓派GPIO引脚号</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  uint has_password;    // 是否有密码</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;} AS608;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;extern AS608 g_as608;</div>
</div><!-- fragment --><h3>2. 全局变量</h3>
<p>使用树莓派的硬件进行串口通信，需要额外配置一下(关闭板载蓝牙功能等)，参考 <a href="https://blog.csdn.net/guet_gjl/article/details/85164072" target="_blank">CSDN-树莓派利用串口进行通信</a>。</p>
<ul>
<li><code>int g_fd</code>：打开串口的文件描述符。</li>
</ul>
<div class="fragment"><div class="line"><a class="code" href="as608_8c.html#ac09e95a250275ca69c109f7bbadfef43">g_fd</a> = serialOpen(<span class="stringliteral">&quot;/dev/ttyAMA0&quot;</span>, 9600);  <span class="comment">// 9600是波特率</span></div>
</div><!-- fragment --><ul>
<li><code>int g_verbose</code>：函数工作过程中输出到屏幕上信息量。为<code>0</code>则显示的很少，主要是传输数据包时会显示进度条。为<code>1</code>则显示详细信息，如发送的指令包内容和接收的指令包内容等。为<code>其他</code>数值则不显示任何信息。</li>
<li><code>int g_error_code</code>：模块返回的错误码 以及 自定义的错误代码。</li>
<li><code>char g_error_desc[128]</code>：错误代码 的含义。可通过<code>char* <a class="el" href="as608_8c.html#af8cb71ea77ec9b32ca50d4732a6a7b67">PS_GetErrorDesc()</a></code>函数获得。</li>
</ul>
<h3>3. 函数</h3>
<p>在<code><a class="el" href="as608_8c.html">as608.c</a></code>中每个函数前都有详细注释。</p>
<h3>4. 如何使用</h3>
<p>把本项目根目录下的<code><a class="el" href="as608_8h.html">as608.h</a></code>和<code><a class="el" href="as608_8c.html">as608.c</a></code>拷贝到你的程序目录下并包含头文件。</p>
<p>还需要包含 <code>&lt;wiringPi.h&gt;</code> 和 <code>&lt;wiringSerial.h&gt;</code>。</p>
<p>最基础的使用如下：</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;wiringPi.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;wiringSerial.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="as608_8h.html">as608.h</a>&quot;</span>          <span class="comment">// 包含头文件</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// 声明全局变量【定义在as608.c】</span></div>
<div class="line"><span class="keyword">extern</span> <a class="code" href="struct_a_s608___module___info.html">AS608</a> <a class="code" href="as608_8c.html#a19c3a0b67af18ae8b8d187e21bcc6398">g_as608</a>;</div>
<div class="line"><span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="as608_8c.html#ac09e95a250275ca69c109f7bbadfef43">g_fd</a>;</div>
<div class="line"><span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="as608_8c.html#af27e3faeb692ec7ae78672182717dd18">g_verbose</a>;</div>
<div class="line"><span class="keyword">extern</span> <span class="keywordtype">char</span>  <a class="code" href="as608_8c.html#a017d41f37a65f0f9222622b307688824">g_error_desc</a>[];</div>
<div class="line"><span class="keyword">extern</span> <a class="code" href="as608_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> <a class="code" href="as608_8c.html#a6957ac1dcfb11e11e72f60f78d16de53">g_error_code</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="_a_s608_2_test_2test_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>() {</div>
<div class="line">    <span class="comment">// 给全局变量赋值</span></div>
<div class="line">    g_as608.<a class="code" href="struct_a_s608___module___info.html#aacc9cf7ae2d65e95f537eafe420f7cd0">detect_pin</a> = 1; </div>
<div class="line">    g_as608.<a class="code" href="struct_a_s608___module___info.html#a0fdbc2c11983db5b9007005be490be89">has_password</a> = 0;  <span class="comment">// 没有密码</span></div>
<div class="line">    <a class="code" href="as608_8c.html#af27e3faeb692ec7ae78672182717dd18">g_verbose</a> = 0;       <span class="comment">// 显示少量输出信息</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// 初始化wiringPi库</span></div>
<div class="line">    <span class="keywordflow">if</span> (-1 == wiringPiSetup())</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 设置g_detect_pin引脚为输入模式</span></div>
<div class="line">    pinMode(g_as608.<a class="code" href="struct_a_s608___module___info.html#aacc9cf7ae2d65e95f537eafe420f7cd0">detect_pin</a>, INPUT);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 打开串口</span></div>
<div class="line">    <span class="keywordflow">if</span> ((<a class="code" href="as608_8c.html#ac09e95a250275ca69c109f7bbadfef43">g_fd</a> = serialOpen(<span class="stringliteral">&quot;/dev/ttyAMA0&quot;</span>, 9600)) &lt; 0)</div>
<div class="line">        <span class="keywordflow">return</span> 2;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 初始化AS608模块</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="as608_8c.html#a522a62d36aeebd23459b2343a84a1972">PS_Setup</a>(0xfffffff, 0x00000000) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> 3;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/****************************************/</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// do something</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">/****************************************/</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// 关闭串口</span></div>
<div class="line">    serialClose(<a class="code" href="as608_8c.html#ac09e95a250275ca69c109f7bbadfef43">g_fd</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>检测手指</p>
<p>AS608使用的是电阻屏，可以通过检测<code>WAK</code>引脚的电平高低来判断模块上是否有手指。</p>
<div class="fragment"><div class="line"><span class="comment">// as608.h 中有一个封装函数</span></div>
<div class="line"><span class="comment">// 检测到手指，返回true，否则返回false</span></div>
<div class="line"><span class="comment">// 前提是配置了 g_as608.detect_pin,  即AS608的WAK引脚</span></div>
<div class="line"><span class="keywordtype">bool</span> <a class="code" href="as608_8c.html#afba869bff98f6cbdbfd50eebf101e9d1">PS_DetectFinger</a>();</div>
</div><!-- fragment --><p>在<code>exanmple/main.c</code>中有两个函数</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{C++}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;// 阻塞至检测到手指，最长阻塞wait_time毫秒</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;bool waitUntilDetectFinger(int wait_time) {</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    while (true) {</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        if (PS_DetectFinger())</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            return true;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        else {</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            delay(100);</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            wait_time -= 100;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;            if (wait_time &lt; 0)</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                return false;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        }</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    }</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;}</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;// 阻塞至检测不到手指，最长阻塞wait_time毫秒</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;bool waitUntilDetectFinger(int wait_time) {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    while (true) {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        if (PS_DetectFinger())</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;            return true;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        else {</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;            delay(100);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;            wait_time -= 100;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;            if (wait_time &lt; 0)</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                return false;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        }</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    }</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;}</div>
</div><!-- fragment --><p>录入指纹</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> newFingerprint(<span class="keywordtype">int</span> pageID) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Please put your finger on the module.\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (waitUntilDetectFinger(5000)) {</div>
<div class="line">        delay(500);</div>
<div class="line">        <a class="code" href="as608_8c.html#ab93b7b3b367d82fc358845a0713e77db">PS_GetImage</a>();</div>
<div class="line">        <a class="code" href="as608_8c.html#ac515c3ff7dce6a27509f9352cd0f1943">PS_GenChar</a>(1);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Didn&#39;t detect finger!\n&quot;</span>);</div>
<div class="line">        exit(1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 判断用户是否抬起了手指，</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;Ok.\nPlease raise your finger!\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (waitUntilNotDetectFinger(5000)) {</div>
<div class="line">        delay(100);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Ok.\nPlease put your finger again!\n&quot;</span>);</div>
<div class="line">        <span class="comment">// 第二次录入指纹</span></div>
<div class="line">        <span class="keywordflow">if</span> (waitUntilDetectFinger(5000)) {</div>
<div class="line">            delay(500);</div>
<div class="line">            <a class="code" href="as608_8c.html#ab93b7b3b367d82fc358845a0713e77db">PS_GetImage</a>();</div>
<div class="line">            <a class="code" href="as608_8c.html#ac515c3ff7dce6a27509f9352cd0f1943">PS_GenChar</a>(2);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error: Didn&#39;t detect finger!\n&quot;</span>);</div>
<div class="line">            exit(1);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error! Didn&#39;t raise your finger\n&quot;</span>);</div>
<div class="line">        exit(1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> score = 0;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="as608_8c.html#aaa413f6e387308e85a872533e9c2428a">PS_Match</a>(&amp;score)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Matched! score=%d\n&quot;</span>, score);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Not matched, raise your finger and put it on again.\n&quot;</span>);</div>
<div class="line">        exit(1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 合并特征文件</span></div>
<div class="line">    <a class="code" href="as608_8c.html#a42e7c83b9eae8089de6a4fa22b63af16">PS_RegModel</a>();</div>
<div class="line">    <a class="code" href="as608_8c.html#a23adbcbb36764d9b638bb9c7caea5b30">PS_StoreChar</a>(2, pageID);</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;OK! New fingerprint saved to pageID=%d\n&quot;</span>, pageID);</div>
<div class="line">}</div>
</div><!-- fragment --><h2>三、命令行程序</h2>
<h3>1. 编译运行</h3>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd example</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;./fp  # 第一次使用，让程序初始化</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;alias fp=./fp # 以后可以使用fp，而不用加前缀&quot;./&quot;</div>
</div><!-- fragment --><h3>2. 修改配置文件</h3>
<p>方法一：编辑 <code>~/.fpconfig</code> ：执行<code>vim ~/.fpconfig</code></p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;address=0xffffffff</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;password=none</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;baudrate=9600</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;detect_pin=1</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;serial=/dev/ttyAMA0</div>
</div><!-- fragment --><p>方法二：使用命令</p>
<ul>
<li><code>fp cfgaddr [address]</code> ：修改address</li>
<li><code>fp cfgpwd [password]</code>：修改password</li>
<li><code>fp cfgserial [serialFile]</code>：修改串口通信端口</li>
<li><code>fp cfgbaud [baudrate]</code>：修改通信波特率</li>
<li><code>fp cfgpin [GPIO_pin]</code>：修改检测手指是否存在 对于的GPIO引脚</li>
</ul>
<h3>3. 如何使用</h3>
<p><code>fp -h</code> ：显示使用帮助</p>
<div class="fragment"><div class="line">A command line program to interact with <a class="code" href="struct_a_s608___module___info.html">AS608</a> module.</div>
<div class="line"></div>
<div class="line">Usage:</div>
<div class="line">  ./fp [command] [param] [option]</div>
<div class="line"></div>
<div class="line">Available Commands:</div>
<div class="line">-------------------------------------------------------------------------</div>
<div class="line">  command  | param     | description</div>
<div class="line">-------------------------------------------------------------------------</div>
<div class="line">  cfgaddr   [addr]     <a class="code" href="struct___config.html">Config</a> address in local config file</div>
<div class="line">  cfgpwd    [pwd]      <a class="code" href="struct___config.html">Config</a> password in local config file</div>
<div class="line">  cfgserial [serialFile] <a class="code" href="struct___config.html">Config</a> serial port in local config file. Default:/dev/ttyAMA0</div>
<div class="line">  cfgbaud   [rate]     <a class="code" href="struct___config.html">Config</a> baud rate in local config file</div>
<div class="line">  cfgpin    [GPIO_pin] <a class="code" href="struct___config.html">Config</a> GPIO pin to detect finger in local confilg file</div>
<div class="line"></div>
<div class="line">  add       [pID]      Add a <span class="keyword">new</span> fingerprint to database. (Read twice) </div>
<div class="line">  enroll    []         Add a <span class="keyword">new</span> fingerprint to database. (Read only once)</div>
<div class="line">  <span class="keyword">delete</span>    [pID {count}]  Delete one or contiguous fingerprints.</div>
<div class="line">  empty     []         Empty the database.</div>
<div class="line">  search    []         Collect fingerprint and search in database.</div>
<div class="line">  identify  []         Search</div>
<div class="line">  count     []         Get the count of registered fingerprints.</div>
<div class="line">  list      []         Show the registered fingerprints list.</div>
<div class="line">  info      []         Show the basic parameters of the module.</div>
<div class="line">  random    []         Generate a random number.(0~2^32)</div>
<div class="line"></div>
<div class="line">  getimage  []         Collect a fingerprint and store to ImageBuffer.</div>
<div class="line">  upimage   [filename] Download finger image to ras-pi in ImageBuffer of the module</div>
<div class="line">  downimage [filename] Upload finger image to module</div>
<div class="line">  genchar   [cID]      Generate fingerprint feature from ImageBuffer.</div>
<div class="line">  match     []         Accurate comparison of CharBuffer1 and CharBuffer2</div>
<div class="line">                         feature files.</div>
<div class="line">  regmodel  []         <a class="code" href="as608_8c.html#afe3350364056dcef1a4b3cafb9af7150">Merge</a> the characteristic file in CharBuffer1 and</div>
<div class="line">                         CharBuffer2 and then generate the <span class="keyword">template</span>, the</div>
<div class="line">                         results are stored in CharBuffer1 and CharBuffer2.</div>
<div class="line">  storechar [cID pID]  Save the <span class="keyword">template</span> file in CharBuffer1 or CharBuffer2</div>
<div class="line">                         to the flash database location with the PageID number</div>
<div class="line">  loadchar  [cID pID]  Reads the fingerprint <span class="keyword">template</span> with the ID specified</div>
<div class="line">                         in the flash database into the <span class="keyword">template</span> buffer,</div>
<div class="line">                         CharBuffer1 or CharBuffer2</div>
<div class="line">  readinf   [filename] Read the FLASH Info Page (512bytes), and save to file</div>
<div class="line">  writenote     [page {note}]   Write note loacted in pageID=page</div>
<div class="line">  readnote      [page]          Read note loacted in pageID=page</div>
<div class="line">  upchar        [cID filename]  Download feature file in CharBufferID to ras-pi</div>
<div class="line">  downchar      [cID filename]  Upload feature file in loacl disk to module</div>
<div class="line">  setpwd        [pwd]           Set password</div>
<div class="line">  vfypwd        [pwd]           Verify password</div>
<div class="line">  packetsize    [{size}]        Show or Set data packet size</div>
<div class="line">  baudrate      [{rate}]        Show or Set baud rate</div>
<div class="line">  level         [{level}]       Show or Set secure level(1~5)</div>
<div class="line">  address       [{addr}]        Show or Set secure level(1~5)</div>
<div class="line"></div>
<div class="line">Avaiable options:</div>
<div class="line">  -h    Show help</div>
<div class="line">  -v    Shwo details while excute the order</div>
<div class="line"></div>
<div class="line">Usage:</div>
<div class="line">  ./fp [command] [param] [option]</div>
</div><!-- fragment --><p><b>注意事项</b></p>
<ul>
<li>选项 <code>-v</code> 或 <code>-h</code> &lt;font color="red"&gt;必须写到最后面&lt;/font&gt;，否则可能出错</li>
<li><code>[]</code>中为命令对应的参数，<code>{}</code>中的表示可选。</li>
</ul>
<h3>4. 示例</h3>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# 录指纹(采集两次)，保存到指纹库的第7号位置</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;fp add 7</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;# 录指纹(采集一次)，返回保存的位置id号</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;fp enroll</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;# 删除指纹库中第5号指纹</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;fp delete 5</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;# 删除指纹库中第0号至第19号(共20个)</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;fp delete 0 20</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;# 采集并比对指纹，以下3条均可</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;fp search</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;fp hsearch  # high speed search</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;fp identity</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;# 列出指纹库中的指纹ID</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;fp list</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;# 显示当前的芯片地址</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;fp address</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;# 设置芯片地址为0xefefefef</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;fp address 0xefefefef  # 前缀0x可省略</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;# 设置密码为0xcc0825cc</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;fp setpwd 0xcc0825cc</div>
</div><!-- fragment --><p>【以下图片以实际执行输出为准，可能有差别之处】</p>
<div class="image">
<img src="img/usage-1.png"  alt="usage-1"/>
</div>
<div class="image">
<img src="img/usage-2.png"  alt="usage-2"/>
</div>
<h2>END</h2>
<p><a href="#" onclick="location.href='mai'+'lto:'+'leo'+'pa'+'rd.'+'c@'+'out'+'lo'+'ok.'+'co'+'m'; return false;">leopa<span style="display: none;">.nosp@m.</span>rd.c<span style="display: none;">.nosp@m.</span>@outl<span style="display: none;">.nosp@m.</span>ook.<span style="display: none;">.nosp@m.</span>com</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
